{% extends "base.html" %}

{% block body %}
<div class="card mb-4">
    <div class="card-body d-flex justify-content-between align-items-center flex-wrap gap-3">
        <div>
            <h2 class="h4 mb-1">Experiment Dashboard</h2>
            <p class="text-muted mb-0">Select a run to inspect metrics or open the full experiment grid.</p>
        </div>
        <a class="btn btn-primary" href="{{ url_for('experiments_index') }}">Open Experiment Grid</a>
    </div>
</div>

{% if experiments %}
<form action="{{ url_for('comparison') }}" method="get">
    <div class="mb-3 text-end">
        <button type="submit" class="btn btn-primary">Compare selected</button>
    </div>
    <div class="table-responsive">
        <table class="table table-sm table-hover">
            <thead class="table-light">
            <tr>
                <th>Select</th>
                <th>Title</th>
                <th>Folder</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for exp in experiments %}
            {% set title_text = exp.title if exp.title != "Untitled" else "" %}
            <tr>
                <td>
                    <input class="form-check-input" type="checkbox" name="ids" value="{{ exp.id }}">
                </td>
                <td>
                    {% if title_text %}
                        {{ title_text }}
                    {% else %}
                        <span class="text-muted">Untitled</span>
                    {% endif %}
                </td>
                <td><code>{{ exp.name }}</code></td>
                <td>
                    <a href="{{ url_for('experiment_detail', exp_id=exp.id) }}" class="btn btn-outline-secondary btn-sm">Detail view</a>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</form>
{% else %}
<div class="alert alert-info">No experiments found in {{ cfg.output_dir }}.</div>
{% endif %}
{% endblock %}
